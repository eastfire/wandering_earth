window.__require=function t(e,i,a){function o(s,c){if(!i[s]){if(!e[s]){var r=s.split("/");if(r=r[r.length-1],!e[r]){var h="function"==typeof __require&&__require;if(!c&&h)return h(r,!0);if(n)return n(r,!0);throw new Error("Cannot find module '"+s+"'")}}var l=i[s]={exports:{}};e[s][0].call(l.exports,function(t){return o(e[s][1][t]||t)},l,l.exports,t,e,i,a)}return i[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<a.length;s++)o(a[s]);return o}({asteroid:[function(t,e,i){"use strict";cc._RF.push(e,"83ef7+zJc9Hyom021YJ0h9e","asteroid");var a=function(t){return t&&t.__esModule?t:{default:t}}(t("global"));cc.Class({extends:cc.Component,properties:{attack:100,speedY:-250},onLoad:function(){var t=360*(Math.random()>.5?1:-1),e=Math.round(20*Math.random())/10+2;this.node.runAction(cc.repeatForever(cc.rotateBy(e,t))),cc.director.getCollisionManager().enabled=!0},onCollisionEnter:function(t){t.getComponent("earth")&&!this.die&&(this.die=!0,cc.audioEngine.play(a.default.game.explosion,!1,.5),this.node.runAction(cc.sequence(cc.fadeOut(.4),cc.callFunc(function(){this.node.destroy()},this))),a.default.game.reduceLife(this.attack))},start:function(){},update:function(t){this.node.y+=this.speedY*t,(this.node.y<-this.node.parent.height||a.default.game.isGameOver)&&this.node.destroy()}}),cc._RF.pop()},{global:"global"}],earth:[function(t,e,i){"use strict";cc._RF.push(e,"27caeOfwlFG5pYOfFwwO2om","earth"),cc.Class({extends:cc.Component,properties:{direction:0},onLoad:function(){cc.director.getCollisionManager().enabled=!0},start:function(){this.accel=300,this.xSpeed=0,this.maxMoveSpeed=50},moveTo:function(t){var e=this.node.parent.width/2*.8,i=-e;t=Math.max(i,Math.min(t,e));var a=Math.abs(t-this.node.x);this.moveAction&&this.node.stopAction(this.moveAction),this.moveAction=this.node.runAction(cc.moveTo(a/this.maxMoveSpeed,t,this.node.y).easing(cc.easeElasticOut()))},update:function(t){}}),cc._RF.pop()},{}],global:[function(t,e,i){"use strict";cc._RF.push(e,"18579BfvbpBNK1QD+E2EptL","global"),Object.defineProperty(i,"__esModule",{value:!0}),i.default={game:null},e.exports=i.default,cc._RF.pop()},{}],intro:[function(t,e,i){"use strict";cc._RF.push(e,"f770dAFc3BJEb8WzNiflbGd","intro"),cc.Class({extends:cc.Component,properties:{},start:function(){this.node.on("touchend",function(t){cc.director.loadScene("main")})}}),cc._RF.pop()},{}],main:[function(t,e,i){"use strict";cc._RF.push(e,"db466tuZhxInryeH0OXPa15","main");var a=function(t){return t&&t.__esModule?t:{default:t}}(t("global"));cc.Class({extends:cc.Component,properties:{earth:{default:null,type:cc.Sprite},asteroids:[cc.Prefab],scoreLabel:{default:null,type:cc.Label},lifeLabel:{default:null,type:cc.Label},life:0,score:0,scoreUnit:"\u4ebf\u516c\u91cc",explosion:{default:null,type:cc.AudioClip},gameOverDialog:{default:null,type:cc.Layout},scoreTitle:{default:null,type:cc.Label},gameOverTitle:{default:null,type:cc.Label},gameOverButtonText:{default:null,type:cc.Label},shipPrefab:{default:null,type:cc.Prefab}},start:function(){var t=this;this.gameOverDialog.node.runAction(cc.hide()),this.earth.getComponent("earth").destX=this.earth.node.x=0,this.node.on("touchstart",function(e){var i=e.getLocation();t.earth.getComponent("earth").moveTo(i.x-t.node.width/2)}),this.node.on("touchmove",function(t){t.getLocation()}),this.node.on("touchend",function(t){}),this.time=10,this.totalTime=0,this.lastDifficultyChangeTime=0,this.generateTime=2,this.targetLife=this.life,a.default.game=this,this.isGameOver=!1,this._updateLife(),this.difficulty=1,this.attackBase=1e3,this.gameOverTime=0},reduceLife:function(t){this.targetLife=Math.max(0,this.targetLife-t),this.lifeLabel.node.color=cc.Color.RED},generateAsteroid:function(){var t=this.asteroids[Math.floor(Math.random()*this.asteroids.length)],e=cc.instantiate(t);e.x=(Math.random()-.5)*this.node.width*.85,e.y=this.node.height/3*2,e.getComponent("asteroid").attack=Math.floor((3*Math.random()*this.attackBase+2*this.attackBase)*this.difficulty),e.getComponent("asteroid").speedY=-Math.floor(100*Math.random()*(1+(this.difficulty-1)/5)+200),e.setScale(1+Math.random()*Math.min(2,(this.difficulty-1)/20)),this.node.addChild(e)},_updateLife:function(){if(1==this.gameOverTime)this.lifeLabel.string=this.life+"\u4eba";else{var t=Math.floor(this.life/1e4),e=this.life%1e4;t?(this.lifeLabel.string=t+"\u4ebf",e&&(this.lifeLabel.string+=e+"\u4e07")):this.lifeLabel.string=e+"\u4e07"}},update:function(t){this.isGameOver||(this.time+=t,this.score+=t,this.totalTime+=t,this.scoreLabel.string=(Math.round(100*this.score)/100).toFixed(2)+this.scoreUnit,this.totalTime-this.lastDifficultyChangeTime>5&&(this.difficulty+=1,this.lastDifficultyChangeTime=this.totalTime,this.generateTime=Math.max(.5,this.generateTime-.1)),this.time>this.generateTime&&(this.time=0,this.generateAsteroid()),this.life>this.targetLife&&(this.life-=Math.round((this.life-this.targetLife)/10)+10,this.life<=this.targetLife&&(this.life=this.targetLife,this.lifeLabel.node.color=cc.Color.WHITE),this._updateLife(),0==this.life&&this.gameOver()))},restart:function(){this.gameOverDialog.node.runAction(cc.hide()),1==this.gameOverTime?(this.earth=cc.instantiate(this.shipPrefab),this.earth.x=0,this.earth.y=-320,this.node.addChild(this.earth),this.scoreTitle.string="\u5e78\u5b58\u4eba\u6570",this.gameOverButtonText.string="\u518d\u6d6a\u4e00\u6b21",this.gameOverTitle.string="\u9053\u8def\u5343\u4e07\u6761\uff0c\u5b89\u5168\u7b2c\u4e00\u6761\n\u822a\u8239\u4e0d\u89c4\u8303\uff0c\u4eba\u7c7b\u4e24\u884c\u6cea",this.isGameOver=!1,this.targetLife=this.life=1e4,this.attackBase=30,this._updateLife()):cc.director.loadScene("main")},gameOver:function(){this.isGameOver=!0,this.gameOverTime++,1==this.gameOverTime?this.earth.node.runAction(cc.sequence(cc.fadeOut(.5),cc.removeSelf())):this.earth.runAction(cc.sequence(cc.fadeOut(.5),cc.removeSelf())),this.gameOverDialog.node.runAction(cc.show())}}),cc._RF.pop()},{global:"global"}]},{},["asteroid","earth","global","intro","main"]);