window.__require=function e(t,i,a){function o(n,c){if(!i[n]){if(!t[n]){var r=n.split("/");if(r=r[r.length-1],!t[r]){var h="function"==typeof __require&&__require;if(!c&&h)return h(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+n+"'")}}var d=i[n]={exports:{}};t[n][0].call(d.exports,function(e){return o(t[n][1][e]||e)},d,d.exports,e,t,i,a)}return i[n].exports}for(var s="function"==typeof __require&&__require,n=0;n<a.length;n++)o(a[n]);return o}({asteroid:[function(e,t,i){"use strict";cc._RF.push(t,"83ef7+zJc9Hyom021YJ0h9e","asteroid");var a=function(e){return e&&e.__esModule?e:{default:e}}(e("global"));cc.Class({extends:cc.Component,properties:{attack:100,speedY:-250},onLoad:function(){var e=360*(Math.random()>.5?1:-1),t=Math.round(20*Math.random())/10+2;this.node.runAction(cc.repeatForever(cc.rotateBy(t,e))),cc.director.getCollisionManager().enabled=!0},onCollisionEnter:function(e){if(e.getComponent("earth")&&!this.die){this.die=!0,cc.audioEngine.play(a.default.game.explosion,!1,.5),this.node.runAction(cc.sequence(cc.fadeOut(.4),cc.removeSelf())),a.default.game.reduceLife(this.attack),(s=cc.instantiate(a.default.game.effectPrefab)).x=(this.node.x+e.node.x)/2,s.y=(this.node.y+e.node.y)/2,s.rotation=360*Math.random(),s.setScale(0);var t=["\u7206","\u70b8","\u8f70"];s.getComponent(cc.Label).string=t[Math.floor(Math.random()*t.length)],a.default.game.playLayer.addChild(s),s.runAction(cc.sequence(cc.scaleTo(.5,1.5).easing(cc.easeCubicActionIn()),cc.removeSelf()));for(var i=Math.floor(3*Math.random()+1),o=0;o<i;o++){var s;(s=cc.instantiate(a.default.game.effectPrefab)).x=this.node.x,s.y=this.node.y,s.rotation=360*Math.random(),s.setScale(.7);t=["\u788e","\u7247","\u77f3","\u7834","\u88c2"];var n=[cc.Color.GRAY,cc.color(148,148,148,255),cc.color(88,88,88,255)];s.getComponent(cc.Label).string=t[Math.floor(Math.random()*t.length)],s.color=n[Math.floor(Math.random()*n.length)],a.default.game.playLayer.addChild(s);var c=100*Math.random()-50,r=100*Math.random()-50;c=c||50,r=r||50,c+=100*Math.abs(c)/c,r+=100*Math.abs(r)/r,s.runAction(cc.sequence(cc.spawn(cc.rotateBy(.6,360*Math.random()),cc.moveBy(.6,c,r)),cc.removeSelf()))}}},start:function(){},update:function(e){this.node.y+=this.speedY*e,(this.node.y<-this.node.parent.height||a.default.game.isGameOver)&&this.node.destroy()}}),cc._RF.pop()},{global:"global"}],"background.js":[function(e,t,i){"use strict";cc._RF.push(t,"b3229qmObBHO5ReQdpiCEt4","background.js"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],earth:[function(e,t,i){"use strict";cc._RF.push(t,"27caeOfwlFG5pYOfFwwO2om","earth"),cc.Class({extends:cc.Component,properties:{direction:0,maxMoveSpeed:150,acc:0,maxAcc:300},onLoad:function(){cc.director.getCollisionManager().enabled=!0},start:function(){this.xSpeed=0},moveTo:function(e){this.destX=e,this.direction=this.destX-this.node.x,this.acc=this.maxAcc*this.direction/Math.abs(this.direction),this.passed=!1,this.moveType="point"},directTo:function(e){Math.abs(e)>.1&&(this.moveType="direction",this.direction=e)},update:function(e){"point"==this.moveType?(this.direction<0?this.node.x<=this.destX&&!this.passed&&(this.passed=!0,this.acc=-this.acc):this.direction>0&&this.node.x>=this.destX&&!this.passed&&(this.passed=!0,this.acc=-this.acc),this.xSpeed+=this.acc*e,this.passed&&Math.abs(this.xSpeed)>=0&&Math.abs(this.xSpeed)<10&&(this.acc=0,this.xSpeed=0,this.direction=0)):"direction"==this.moveType&&(this.xSpeed=this.direction*this.maxMoveSpeed/.3),Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed)),this.node.x+=this.xSpeed*e;var t=this.node.parent.width/2*.8,i=-t;this.node.x>t?this.node.x=t:this.node.x<i&&(this.node.x=i)}}),cc._RF.pop()},{}],global:[function(e,t,i){"use strict";cc._RF.push(t,"18579BfvbpBNK1QD+E2EptL","global"),Object.defineProperty(i,"__esModule",{value:!0}),i.default={game:null},t.exports=i.default,cc._RF.pop()},{}],intro:[function(e,t,i){"use strict";cc._RF.push(t,"f770dAFc3BJEb8WzNiflbGd","intro"),cc.Class({extends:cc.Component,properties:{},start:function(){this.node.on("touchend",function(e){cc.director.loadScene("main")})}}),cc._RF.pop()},{}],main:[function(e,t,i){"use strict";cc._RF.push(t,"db466tuZhxInryeH0OXPa15","main");var a=function(e){return e&&e.__esModule?e:{default:e}}(e("global"));cc.Class({extends:cc.Component,properties:{asteroids:[cc.Prefab],scoreLabel:{default:null,type:cc.Label},lifeLabel:{default:null,type:cc.Label},life:0,score:0,scoreUnit:"\u4ebf\u516c\u91cc",explosion:{default:null,type:cc.AudioClip},gameOverDialog:{default:null,type:cc.Layout},gameOverDialog2:{default:null,type:cc.Layout},scoreTitle:{default:null,type:cc.Label},shipPrefab:{default:null,type:cc.Prefab},earthPrefab:{default:null,type:cc.Prefab},playLayer:{default:null,type:cc.Node},effectPrefab:{type:cc.Prefab,default:null}},start:function(){var e=this;this.earth=cc.instantiate(this.earthPrefab),this.earth.x=0,this.earth.y=-320,this.playLayer.addChild(this.earth),this.earth.getComponent("earth").destX=this.earth.x=0,this.node.on("touchstart",function(t){var i=t.getLocation();e.earth.getComponent("earth").moveTo(i.x-e.node.width/2)}),this.node.on("touchmove",function(t){var i=t.getLocation();e.earth.getComponent("earth").moveTo(i.x-e.node.width/2)}),this.node.on("touchend",function(t){var i=t.getLocation();e.earth.getComponent("earth").moveTo(i.x-e.node.width/2)}),cc.systemEvent.setAccelerometerEnabled(!0),cc.systemEvent.on(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this),this.time=10,this.totalTime=0,this.lastDifficultyChangeTime=0,this.generateTime=2,this.targetLife=this.life,a.default.game=this,this.isGameOver=!1,this._updateLife(),this.difficulty=1,this.attackBase=2e3,this.gameOverTime=0},onDestroy:function(){cc.systemEvent.setAccelerometerEnabled(!1),cc.systemEvent.off(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this)},onDeviceMotionEvent:function(e){this.earth.getComponent("earth").directTo(e.acc.x)},reduceLife:function(e){this.targetLife=Math.max(0,this.targetLife-e),this.lifeLabel.node.color=cc.Color.RED,this.lifeLabel.node.runAction(cc.sequence(cc.scaleTo(.1,.8),cc.scaleTo(.3,1)))},generateAsteroid:function(){var e=this.asteroids[Math.floor(Math.random()*this.asteroids.length)],t=cc.instantiate(e);t.x=(Math.random()-.5)*this.node.width*.85,t.y=this.node.height/3*2,t.getComponent("asteroid").attack=Math.floor((3*Math.random()*this.attackBase+3*this.attackBase)*(this.difficulty/2)),t.getComponent("asteroid").speedY=-Math.floor(100*Math.random()*(1+(this.difficulty-1)/5)+200),t.setScale(1+Math.random()*Math.min(1.5,(this.difficulty-1)/20)),this.playLayer.addChild(t)},levelStrategy1:function(){},levelStrategy2:function(){},levelStrategy3:function(){},_updateLife:function(){if(1==this.gameOverTime)this.lifeLabel.string=this.life+"\u4eba";else{var e=Math.floor(this.life/1e4),t=this.life%1e4;e?(this.lifeLabel.string=e+"\u4ebf",t&&(this.lifeLabel.string+=t+"\u4e07")):this.lifeLabel.string=t+"\u4e07"}},update:function(e){this.isGameOver||(this.time+=e,this.score+=e,this.totalTime+=e,this.scoreLabel.string=(Math.round(100*this.score)/100).toFixed(2)+this.scoreUnit,this.totalTime-this.lastDifficultyChangeTime>5&&(this.difficulty+=1,this.lastDifficultyChangeTime=this.totalTime,this.generateTime=Math.max(.7,this.generateTime-.1)),this.time>this.generateTime&&(this.time=0,this.generateAsteroid()),this.life>this.targetLife&&(this.life-=Math.round((this.life-this.targetLife)/10)+10,this.life<=this.targetLife&&(this.life=this.targetLife,this.lifeLabel.node.color=cc.Color.WHITE),this._updateLife(),0==this.life&&this.gameOver()))},restart:function(){this.gameOverDialog.node.runAction(cc.moveTo(.5,-800,0)),1==this.gameOverTime?(this.earth=cc.instantiate(this.shipPrefab),this.earth.x=0,this.earth.y=-320,this.earth.getComponent("earth").maxMoveSpeed=200,this.playLayer.addChild(this.earth),this.scoreTitle.string="\u5e78\u5b58\u4eba\u6570",this.isGameOver=!1,this.targetLife=this.life=1e4,this.attackBase=50,this._updateLife()):cc.director.loadScene("main")},gameOver:function(){this.isGameOver=!0,this.gameOverTime++,1==this.gameOverTime?(this.earth.runAction(cc.sequence(cc.fadeOut(.5),cc.removeSelf())),this.gameOverDialog.node.runAction(cc.moveTo(.4,0,0))):(this.earth.runAction(cc.sequence(cc.fadeOut(.5),cc.removeSelf())),this.gameOverDialog2.node.runAction(cc.moveTo(.4,0,9)))}}),cc._RF.pop()},{global:"global"}]},{},["asteroid","background.js","earth","global","intro","main"]);